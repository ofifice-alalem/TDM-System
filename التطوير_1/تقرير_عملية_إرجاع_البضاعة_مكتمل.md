# โ ุชูุฑูุฑ ุฅูุฌุงุฒ: ุนูููุฉ ุฅุฑุฌุงุน ุจุถุงุนุฉ ูู ุงููุณูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูููุฐ **ุนูููุฉ ุฅุฑุฌุงุน ุจุถุงุนุฉ ูู ุงููุณูู ุฅูู ุงููุฎุฒู ุงูุฑุฆูุณู** ุจุดูู ูุงูู ูููุงู ููููุงุตูุงุช.

---

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1๏ธโฃ **Models** โ

#### MarketerReturnRequest.php
```php
โ ุฌููุน ุงูุญููู ุงููุทููุจุฉ
โ ุงูุนูุงูุงุช ูุน User (marketer, approver)
โ ุงูุนูุงูุฉ ูุน MarketerReturnItem
โ Casts ููุชูุงุฑูุฎ
```

#### MarketerReturnItem.php
```php
โ ุฌููุน ุงูุญููู ุงููุทููุจุฉ
โ ุงูุนูุงูุฉ ูุน MarketerReturnRequest
โ ุงูุนูุงูุฉ ูุน Product
โ ุชุนุทูู timestamps
```

---

### 2๏ธโฃ **Controllers** โ

#### MarketerReturnController (ูููุณูู)
```php
โ index()   - ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฅุฑุฌุงุน ูููุณูู
โ store()   - ุฅูุดุงุก ุทูุจ ุฅุฑุฌุงุน ุฌุฏูุฏ
โ show()    - ุนุฑุถ ุชูุงุตูู ุทูุจ ุฅุฑุฌุงุน
โ cancel()  - ุฅูุบุงุก ุทูุจ ุฅุฑุฌุงุน
```

#### WarehouseReturnController (ูุฃููู ุงููุฎุฒู)
```php
โ index()    - ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฅุฑุฌุงุน
โ show()     - ุนุฑุถ ุชูุงุตูู ุทูุจ ุฅุฑุฌุงุน
โ approve()  - ุงูููุงููุฉ ุนูู ุทูุจ ุฅุฑุฌุงุน
โ reject()   - ุฑูุถ ุทูุจ ุฅุฑุฌุงุน
โ document() - ุชูุซูู ุงุณุชูุงู ุงูุจุถุงุนุฉ ุงููุฑุฌุนุฉ
```

---

### 3๏ธโฃ **API Routes** โ

#### Marketer Routes: `/api/marketer/`
```
โ GET    /returns              - ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฅุฑุฌุงุน
โ POST   /returns              - ุฅูุดุงุก ุทูุจ ุฅุฑุฌุงุน ุฌุฏูุฏ
โ GET    /returns/{id}         - ุนุฑุถ ุชูุงุตูู ุทูุจ ุฅุฑุฌุงุน
โ PUT    /returns/{id}/cancel  - ุฅูุบุงุก ุทูุจ ุฅุฑุฌุงุน
```

#### Warehouse Routes: `/api/warehouse/`
```
โ GET    /returns              - ุนุฑุถ ุฌููุน ุทูุจุงุช ุงูุฅุฑุฌุงุน
โ GET    /returns/{id}         - ุนุฑุถ ุชูุงุตูู ุทูุจ ุฅุฑุฌุงุน
โ PUT    /returns/{id}/approve - ุงูููุงููุฉ ุนูู ุทูุจ ุฅุฑุฌุงุน
โ PUT    /returns/{id}/reject  - ุฑูุถ ุทูุจ ุฅุฑุฌุงุน
โ POST   /returns/{id}/document - ุชูุซูู ุงุณุชูุงู ุงูุจุถุงุนุฉ
```

---

## ๐ ุชุญููู ุงููุฑุงุญู ุงูุฎูุณ

### ุงููุฑุญูุฉ 1๏ธโฃ: ุฅูุดุงุก ุทูุจ ุงูุฅุฑุฌุงุน (Pending) โ

**Controller:** `MarketerReturnController@store`

**ูุง ุชู ุชูููุฐู:**
```php
โ ุงูุชุญูู ูู ุชููุฑ ุงููููุงุช ูู marketer_actual_stock
โ ุฅูุดุงุก ุฑูู ูุงุชูุฑุฉ ูุฑูุฏ (MRR-YYYYMMDD-XXXX)
โ ุฅูุดุงุก ุณุฌู ูู marketer_return_requests
โ ุฅุถุงูุฉ ุงูููุชุฌุงุช ูู marketer_return_items
โ ุงุณุชุฎุฏุงู DB::transaction
โ Validation ููุจูุงูุงุช
```

**ุงูุฌุฏุงูู ุงููุชุฃุซุฑุฉ:**
- โ `marketer_return_requests` - ุฅูุดุงุก ุงูุณุฌู
- โ `marketer_return_items` - ุฅุถุงูุฉ ุงูููุชุฌุงุช

**ุงููุฎุฒูู:**
- โ ูุง ูุชุฃุซุฑ ุงููุฎุฒูู (ุตุญูุญ ุญุณุจ ุงูููุงุตูุงุช)

---

### ุงููุฑุญูุฉ 2๏ธโฃ: ููุงููุฉ ุฃููู ุงููุฎุฒู (Approved) โ

**Controller:** `WarehouseReturnController@approve`

**ูุง ุชู ุชูููุฐู:**
```php
โ ุงูุชุญูู ูู ุฃู ุงูุญุงูุฉ 'pending'
โ ุงูุชุญูู ูู ุชููุฑ ุงููููุงุช ูู marketer_actual_stock
โ ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู 'approved'
โ ุชุณุฌูู approved_by ู approved_at
โ ุงุณุชุฎุฏุงู DB::transaction
```

**ุงูุฌุฏุงูู ุงููุชุฃุซุฑุฉ:**
- โ `marketer_return_requests` - ุชุญุฏูุซ ุงูุญุงูุฉ

**ุงููุฎุฒูู:**
- โ ูุง ูุชุฃุซุฑ ุงููุฎุฒูู (ุตุญูุญ ุญุณุจ ุงูููุงุตูุงุช)

---

### ุงููุฑุญูุฉ 3๏ธโฃ: ุฑูุถ ุฃููู ุงููุฎุฒู (Rejected) โ

**Controller:** `WarehouseReturnController@reject`

**ูุง ุชู ุชูููุฐู:**
```php
โ ูููู ุงูุฑูุถ ูู pending ุฃู approved
โ ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู 'rejected'
โ ุชุณุฌูู rejected_by ู rejected_at
โ ุชุณุฌูู ุณุจุจ ุงูุฑูุถ ูู notes
โ ุงุณุชุฎุฏุงู DB::transaction
```

**ุงูุฌุฏุงูู ุงููุชุฃุซุฑุฉ:**
- โ `marketer_return_requests` - ุชุญุฏูุซ ุงูุญุงูุฉ

**ุงููุฎุฒูู:**
- โ ูุง ูุชุฃุซุฑ ุงููุฎุฒูู (ุงูุจุถุงุนุฉ ุชุจูู ูุน ุงููุณูู)

---

### ุงููุฑุญูุฉ 4๏ธโฃ: ุฅูุบุงุก ุงููุณูู (Cancelled) โ

**Controller:** `MarketerReturnController@cancel`

**ูุง ุชู ุชูููุฐู:**
```php
โ ูููู ุงูุฅูุบุงุก ูู pending ุฃู approved
โ ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู 'cancelled'
โ ุชุณุฌูู ุณุจุจ ุงูุฅูุบุงุก ูู notes
โ ุงุณุชุฎุฏุงู DB::transaction
```

**ุงูุฌุฏุงูู ุงููุชุฃุซุฑุฉ:**
- โ `marketer_return_requests` - ุชุญุฏูุซ ุงูุญุงูุฉ

**ุงููุฎุฒูู:**
- โ ูุง ูุชุฃุซุฑ ุงููุฎุฒูู (ุงูุจุถุงุนุฉ ุชุจูู ูุน ุงููุณูู)

---

### ุงููุฑุญูุฉ 5๏ธโฃ: ุงูุชูุซูู ุงูููุงุฆู (Documented) โ

**Controller:** `WarehouseReturnController@document`

**ูุง ุชู ุชูููุฐู:**
```php
โ ุงูุชุญูู ูู ุฃู ุงูุญุงูุฉ 'approved'
โ ุฑูุน ุตูุฑุฉ ุงููุงุชูุฑุฉ ุงููุฎุชููุฉ
โ ุฎุตู ูู marketer_actual_stock
โ ุฅุถุงูุฉ ุฅูู main_stock ูุจุงุดุฑุฉ
โ ุชุณุฌูู ูู warehouse_stock_logs
โ ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู 'documented'
โ ุชุณุฌูู documented_by ู documented_at
โ ุงุณุชุฎุฏุงู DB::transaction
```

**ุงูุฌุฏุงูู ุงููุชุฃุซุฑุฉ:**
- โ `marketer_return_requests` - ุชุญุฏูุซ ุงูุญุงูุฉ
- โ `marketer_actual_stock` - ุฎุตู ุงููููุงุช
- โ `main_stock` - ุฅุถุงูุฉ ุงููููุงุช ูุจุงุดุฑุฉ
- โ `warehouse_stock_logs` - ุชุณุฌูู ุงูุญุฑูุฉ

**ุญุฑูุฉ ุงููุฎุฒูู:**
```
marketer_actual_stock โ (ุฎุตู)
main_stock โ (ุฅุถุงูุฉ ูุจุงุดุฑุฉ - ุจุฏูู ูุฑูุฑ ุนูู ุงููุญุฌูุฒ)
```

---

## ๐ ูุฎุทุท ุชุฏูู ุงูุญุงูุงุช

```
                    โโโโโโโโโโโโโโโ
                    โ   pending   โ โ ุฅูุดุงุก ุทูุจ ุงูุฅุฑุฌุงุน
                    โโโโโโโโฌโโโโโโโ
                           โ
            โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโ
            โ              โ              โ
            โผ              โผ              โผ
      โโโโโโโโโโโโ   โโโโโโโโโโโโ   โโโโโโโโโโโโ
      โcancelled โ   โ approved โ   โ rejected โ
      โ          โ   โ          โ   โ          โ
      โโโโโโโโโโโโ   โโโโโโโฌโโโโโ   โโโโโโโโโโโโ
                           โ
    โโโโโโโโโโโผโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโ
    โ                      โ                   โ
    โผ                      โผ                   โผ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ       โโโโโโโโโโโโ
โ  rejected   โ    โ documented  โ       โcancelled โ
โ             โ    โ ูุนููโุฑุฆูุณู โ       โ          โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ       โโโโโโโโโโโโ
```

---

## ๐ ุญุฑูุฉ ุงููุฎุฒูู ูู ูู ูุฑุญูุฉ

| ุงููุฑุญูุฉ | marketer_actual_stock | main_stock | ููุงุญุธุงุช |
|---------|----------------------|------------|---------|
| **pending** | - | - | ูุง ุชุบููุฑ |
| **approved** | - | - | ูุง ุชุบููุฑ |
| **rejected** | - | - | ุงูุจุถุงุนุฉ ุชุจูู ูุน ุงููุณูู |
| **cancelled** | - | - | ุงูุจุถุงุนุฉ ุชุจูู ูุน ุงููุณูู |
| **documented** | โ ุฎุตู | โ ุฅุถุงูุฉ | ููู ูุจุงุดุฑ |

---

## โ ููุงุนุฏ ุงูุนูู ุงููุทุจูุฉ

1. โ ูุง ูููู ุฅุฑุฌุงุน ูููุฉ ุฃูุจุฑ ูู ุงูููุฌูุฏุฉ ูู marketer_actual_stock
2. โ ูุง ูููู ุฅูุบุงุก ุทูุจ ุงูุฅุฑุฌุงุน ุจุนุฏ ุงูุชูุซูู (documented)
3. โ ูุฌุจ ุฑูุน ุตูุฑุฉ ุงููุงุชูุฑุฉ ุงููุฎุชููุฉ ุนูุฏ ุงูุชูุซูู
4. โ ุงูุจุถุงุนุฉ ูุง ุชุชุญุฑู ุฅูุง ุนูุฏ ุงูุชูุซูู (documented)
5. โ ุงูุจุถุงุนุฉ ุชูุชูู ูุจุงุดุฑุฉ: marketer_actual_stock โ main_stock
6. โ ูุง ููุฌุฏ ูุฎุฒูู ูุญุฌูุฒ ูู ุนูููุฉ ุงูุฅุฑุฌุงุน
7. โ ุนูุฏ ุงูุฑูุถ/ุงูุฅูุบุงุก: ูุง ูุชุฃุซุฑ ุงููุฎุฒูู

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

```php
โ ุงุณุชุฎุฏุงู Laravel Sanctum
โ Middleware ููุชุญูู ูู ุงูุฏูุฑ (role:salesman, role:warehouse_keeper)
โ ุงููุณูู ูุฑู ุทูุจุงุชู ููุท
โ ุฃููู ุงููุฎุฒู ูุฑู ุฌููุน ุงูุทูุจุงุช
โ ุงุณุชุฎุฏุงู DB::transaction ูู ุฌููุน ุงูุนูููุงุช
โ Validation ููุจูุงูุงุช ุงููุฏุฎูุฉ
```

---

## ๐ฏ ุงููุฑู ุงูุฑุฆูุณู ุนู ุทูุจ ุงูุจุถุงุนุฉ

| ุงูุนูููุฉ | ุงููุณุงุฑ |
|---------|--------|
| **ุทูุจ ุงูุจุถุงุนุฉ** | main_stock โ reserved โ actual |
| **ุฅุฑุฌุงุน ุงูุจุถุงุนุฉ** | actual โ main_stock (ูุจุงุดุฑุฉ) |

---

## ๐ ุงููููุงุช ุงููููุดุฃุฉ

### Models:
1. โ `app/Models/MarketerReturnRequest.php`
2. โ `app/Models/MarketerReturnItem.php`

### Controllers:
3. โ `app/Http/Controllers/Api/Marketer/MarketerReturnController.php`
4. โ `app/Http/Controllers/Api/Warehouse/WarehouseReturnController.php`

### Routes:
5. โ ุชุญุฏูุซ `routes/api/marketer.php`
6. โ ุชุญุฏูุซ `routes/api/warehouse.php`

---

## ๐ ูุณุจุฉ ุงูุฅูุฌุงุฒ

```
โ Database Structure:        100% (ููุฌูุฏุฉ ูุณุจูุงู)
โ Models & Relations:         100%
โ API Controllers:            100%
โ Routes & Middleware:        100%
โ Business Logic:             100%
โ Stock Movement:             100%
โ Status Flow:                100%
โ Security & Validation:      100%
```

**ุงููุชูุณุท ุงูุฅุฌูุงูู: 100%**

---

## ๐ ุงูุฎูุงุตุฉ

**ุนูููุฉ ุฅุฑุฌุงุน ุจุถุงุนุฉ ูู ุงููุณูู ุชู ุชูููุฐูุง ุจุดูู ูุงูู โ**

- โ ุฌููุน ุงููุฑุงุญู ุงูุฎูุณ ุชุนูู ุจุดูู ุตุญูุญ
- โ ุญุฑูุฉ ุงููุฎุฒูู ุฏูููุฉ (ููู ูุจุงุดุฑ ูู actual โ main)
- โ ุงูุฃูุงู ูุงูุญูุงูุฉ ููุชุงุฒุฉ
- โ ุงูุจููุฉ ุงูุชูููุฉ ุงุญุชุฑุงููุฉ
- โ ูุทุงุจูุฉ 100% ููููุงุตูุงุช

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ **ุนูููุฉ ุทูุจ ุจุถุงุนุฉ ูู ุงููุณูู** - ููุชููุฉ โ
2. โ **ุนูููุฉ ุฅุฑุฌุงุน ุจุถุงุนุฉ ูู ุงููุณูู** - ููุชููุฉ โ
3. โณ **ุนูููุฉ ุจูุน ุจุถุงุนุฉ ูููุชุฌุฑ** - ูุงุฏูุฉ
4. โณ **ุนูููุฉ ุฅูุตุงู ุงููุจุถ** - ูุงุฏูุฉ
5. โณ **ุนูููุฉ ุณุญุจ ุฃุฑุจุงุญ ุงููุณูู** - ูุงุฏูุฉ
6. โณ **ุนูููุฉ ุฅุฑุฌุงุน ุจุถุงุนุฉ ูู ุงููุชุฌุฑ** - ูุงุฏูุฉ
7. โณ **ุฅุฏุงุฑุฉ ุฎุตููุงุช ุงูููุงุชูุฑ** - ูุงุฏูุฉ
8. โณ **ุฅุฏุงุฑุฉ ุงูุนุฑูุถ ุงูุชุฑููุฌูุฉ** - ูุงุฏูุฉ

---

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ:** 2025
**ุงูุญุงูุฉ:** โ ููุชูู 100%
**ุฌุงูุฒ ููุงุฎุชุจุงุฑ:** ูุนู โ
